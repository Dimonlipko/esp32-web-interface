<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" class="no-js" lang="en">
<head>
<!--
 * This file is part of the esp8266 web interface
 *
 * Copyright (C) 2018 Johannes Huebner <dev@johanneshuebner.com>
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 *
-->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" >
<title>RTC Settings</title>
<script src="inverter.js" type="text/javascript"></script>

<script type="text/javascript">
function onLoad()
{

    const getFiles = function() {
        const xhr = new XMLHttpRequest()
        xhr.onload = function() {
            if (xhr.status == 200) {
                const element = document.getElementById('files')
                const data = JSON.parse(xhr.response)
                data.forEach(function(d) {
                    const containerDiv = document.createElement("div");
                    const documentAnchor = document.createElement("a");
                    documentAnchor.setAttribute('href', d)

                    documentAnchor.innerText = d;
                    containerDiv.append(documentAnchor)

                    element.append(containerDiv);
                })

            } else {
                console.error('Error!')
            }
        }

        xhr.open('GET', '/sdcard/list')
        xhr.send()
    }
    //update the timestamp every 30 seconds
   // setInterval(getFiles, 30000);
    getFiles();

   
}

</script>
<style>

</style>
</head>
<body style="background-color:#D3D3D3" onload="onLoad()">
    <h2>SD Card</h2>
    <div id="files">

    </div>
</body>
</html>

